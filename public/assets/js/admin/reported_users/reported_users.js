(()=>{"use strict";$(document).ready((function(){$("#isActiveFilter").select2({minimumResultsForSearch:-1});var e=$("#reportedUsersTable").DataTable({processing:!0,serverSide:!0,bStateSave:!0,order:[[2,"desc"]],ajax:{url:route("reported-users.index"),data:function(e){e.is_active_filter=$("#isActiveFilter").find("option:selected").val()}},columnDefs:[{targets:[4],orderable:!1,className:"text-center",width:"7%"},{targets:[3],orderable:!1,className:"text-center",width:"80px"},{targets:[2],width:"100px"}],columns:[{data:function(e){return htmlSpecialCharsDecode(e.reported_by.name)},name:"reportedBy.name"},{data:function(e){return htmlSpecialCharsDecode(e.reported_to.name)},name:"reportedTo.name"},{data:function(e){return e},render:function(e){return'<span data-toggle="tooltip" title="'+moment(e.created_at).locale(currentLocale).format("hh:mm:ss a")+'">'+moment(e.created_at).locale(currentLocale).format("DD-MMM-YYYY")+"</span>"},name:"created_at"},{data:function(e){return e.reported_to.id==loggedInUserId?e.reported_to.is_active?"Active":"Deactive":(e.checked=0===e.reported_to.is_active?"":"checked",$.templates("#isActiveSwitch").render(e))},name:"id"},{data:function(e){return $.templates("#viewDelIcons").render(e)},name:"id"}],drawCallback:function(){this.api().state.clear(),$('[data-toggle="tooltip"]').tooltip()},fnInitComplete:function(){$("#isActiveFilter").change((function(){e.ajax.reload()}))}}),t=Swal.mixin({customClass:{confirmButton:"btn btn-danger mr-2 btn-lg",cancelButton:"btn btn-secondary btn-lg"},buttonsStyling:!1});$(document).on("click",".delete-btn",(function(){var e=$(this).data("id");!function(e,r,a){t.fire({title:Lang.get("messages.placeholder.are_you_sure"),html:Lang.get("messages.placeholder.want_to_delete_this")+'"'+a+'" ?',icon:"warning",showCancelButton:!0,confirmButtonText:"Delete"}).then((function(t){t.value&&deleteItemAjax(e,r,a,null)}))}(route("reported-users.destroy",e),"#reportedUsersTable",Lang.get("messages.placeholder.reported_user"))})),$(document).on("click",".view-btn",(function(){var e=$(this).data("id");$.ajax({type:"GET",url:route("reported-users.show",e),success:function(e){$(".reported-user-notes").html(e.notes),$(".reported-by").text(e.reported_by.name),$(".reported-to").text(e.reported_to.name),$("#viewReportNoteModal").modal("show")}})})),$(document).on("change",".is-active",(function(e){var t=$(e.currentTarget).data("id");activeDeActiveUser(t)})),window.activeDeActiveUser=function(t){$.ajax({url:route("active-de-active-user",t),method:"post",cache:!1,success:function(t){t.success&&(displayToastr("Success","success",t.message),e.ajax.reload(null,!1))},error:function(e){displayToastr("Error","error",e.responseJSON.message)}})}}))})();